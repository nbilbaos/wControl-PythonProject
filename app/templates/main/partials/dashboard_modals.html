<div class="modal fade" id="weightModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title">Nuevo Registro</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <form action="{{ url_for('main.add_weight_entry') }}" method="POST">
          <div class="modal-body">
            <div class="mb-3">
                <label class="form-label">Peso (kg)</label>
                <input type="number" step="0.1" class="form-control form-control-lg" name="weight" id="weightInput" placeholder="Ej: 75.5" required>
            </div>
            <div class="mb-3">
                <label class="form-label">Fecha</label>
                <input type="date" class="form-control" name="date" id="dateInput" required>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
            <button type="submit" class="btn btn-primary">Guardar</button>
          </div>
      </form>
    </div>
  </div>
</div>

<div class="modal fade" id="editWeightModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title">Editar Registro</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <form id="editForm" method="POST">
          <div class="modal-body">
            <input type="hidden" name="next" value="dashboard">

            <div class="mb-3">
                <label class="form-label">Peso (kg)</label>
                <input type="number" step="0.1" class="form-control" name="weight" id="editWeightInput" required>
            </div>
            <div class="mb-3">
                <label class="form-label">Fecha</label>
                <input type="date" class="form-control" name="date" id="editDateInput" required>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
            <button type="submit" class="btn btn-primary">Guardar Cambios</button>
          </div>
      </form>
    </div>
  </div>
</div>

<div class="modal fade" id="deleteWeightModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title">Confirmar Eliminación</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body text-center py-4">
        <i class="bi bi-exclamation-triangle-fill text-warning display-4 mb-3"></i>
        <p class="mb-1">¿Estás seguro de que deseas eliminar el registro del día:</p>
        <h5 id="deleteDateText" class="fw-bold"></h5>
        <p class="text-danger small mt-3 mb-0">Esta acción no se puede deshacer.</p>
      </div>
      <div class="modal-footer justify-content-center">
        <button type="button" class="btn btn-secondary px-4" data-bs-dismiss="modal">Cancelar</button>
        <form id="deleteForm" method="POST">
            <input type="hidden" name="next" value="dashboard">
            <button type="submit" class="btn btn-danger px-4">Eliminar</button>
        </form>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="achievementModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0 shadow-lg text-center" style="background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);">
            <div class="modal-header border-0 justify-content-end pb-0">
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body pb-5 pt-0">
                <div class="mb-4 achievement-bounce">
                    <i id="modalIcon" class="bi display-1"></i>
                </div>
                <h2 class="fw-bold text-dark mb-3">¡Nuevo Logro Desbloqueado!</h2>
                <h4 id="modalTitle" class="fw-bold mb-3 text-uppercase"></h4>
                <p class="text-muted px-4">Has demostrado una constancia increíble.</p>
                <button type="button" class="btn btn-primary rounded-pill px-5 mt-3 shadow-sm" data-bs-dismiss="modal">¡Genial!</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="chartSettingsModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-primary text-white">

        <h5 class="modal-title">Configurar Gráfico</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form id="chartOptionsForm">
            <div class="mb-3">
                <label class="form-label">Rango de Tiempo</label>
                <select class="form-select" id="timeFilter" onchange="toggleCustomDate()">
                    <option value="1m">Último Mes</option>
                    <option value="3m">Últimos 3 Meses</option>
                    <option value="all">Todo el historial</option>
                    <option value="custom">Rango Personalizado</option>
                </select>
            </div>

            <div id="customDateRange" style="display:none;">
                <div class="mb-3">
                    <label class="form-label">Desde:</label>
                    <input type="date" class="form-control" id="startDate">
                </div>
                <div class="mb-3">
                    <label class="form-label">Hasta:</label>
                    <input type="date" class="form-control" id="endDate">
                </div>
            </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
        <button type="button" class="btn btn-primary" onclick="updateChart()">Aplicar</button>
      </div>
    </div>
  </div>
</div>